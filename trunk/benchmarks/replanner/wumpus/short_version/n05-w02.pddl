(define (problem n05-w02)
    (:domain short-wumpus)
    (:objects p11 p12 p13 p14 p15 p21 p22 p23 p24 p25 p31 p32 p33 p34 p35 p41 p42 p43 p44 p45 p51 p52 p53 p54 p55 - pos)
    (:init
        (adj p11 p12) (adj p11 p21)
        (adj p12 p13) (adj p12 p22) (adj p12 p11)
        (adj p13 p14) (adj p13 p23) (adj p13 p12)
        (adj p14 p15) (adj p14 p24) (adj p14 p13)
                      (adj p15 p25) (adj p15 p14)
        (adj p21 p22) (adj p21 p31)               (adj p21 p11)
        (adj p22 p23) (adj p22 p32) (adj p22 p21) (adj p22 p12)
        (adj p23 p24) (adj p23 p33) (adj p23 p22) (adj p23 p13)
        (adj p24 p25) (adj p24 p34) (adj p24 p23) (adj p24 p14)
                      (adj p25 p35) (adj p25 p24) (adj p25 p15)
        (adj p31 p32) (adj p31 p41)               (adj p31 p21)
        (adj p32 p33) (adj p32 p42) (adj p32 p31) (adj p32 p22)
        (adj p33 p34) (adj p33 p43) (adj p33 p32) (adj p33 p23)
        (adj p34 p35) (adj p34 p44) (adj p34 p33) (adj p34 p24)
                      (adj p35 p45) (adj p35 p34) (adj p35 p25)
        (adj p41 p42) (adj p41 p51)               (adj p41 p31)
        (adj p42 p43) (adj p42 p52) (adj p42 p41) (adj p42 p32)
        (adj p43 p44) (adj p43 p53) (adj p43 p42) (adj p43 p33)
        (adj p44 p45) (adj p44 p54) (adj p44 p43) (adj p44 p34)
                      (adj p45 p55) (adj p45 p44) (adj p45 p35)
        (adj p51 p52)                             (adj p51 p41)
        (adj p52 p53)               (adj p52 p51) (adj p52 p42)
        (adj p53 p54)               (adj p53 p52) (adj p53 p43)
        (adj p54 p55)               (adj p54 p53) (adj p54 p44)
                                    (adj p55 p54) (adj p55 p45)

        (at p11)

        ; Oneofs for wumpuses. If a invariant for p11 is inserted,
        ; the problem becomes unsolvable as there is no way to 
        ; deduce K-not-wumpus(p11) and the agent can't
        ; backtrack to initial position.
        ;(invariant (wumpus p11) (not (wumpus p11)))
        (invariant (wumpus p12) (not (wumpus p12)))
        (invariant (wumpus p13) (not (wumpus p13)))
        (invariant (wumpus p14) (not (wumpus p14)))
        (invariant (wumpus p15) (not (wumpus p15)))
        (invariant (wumpus p21) (not (wumpus p21)))
        (invariant (wumpus p22) (not (wumpus p22)))
        (invariant (wumpus p23) (not (wumpus p23)))
        (invariant (wumpus p24) (not (wumpus p24)))
        (invariant (wumpus p25) (not (wumpus p25)))
        (invariant (wumpus p31) (not (wumpus p31)))
        (invariant (wumpus p32) (not (wumpus p32)))
        (invariant (wumpus p33) (not (wumpus p33)))
        (invariant (wumpus p34) (not (wumpus p34)))
        (invariant (wumpus p35) (not (wumpus p35)))
        (invariant (wumpus p41) (not (wumpus p41)))
        (invariant (wumpus p42) (not (wumpus p42)))
        (invariant (wumpus p43) (not (wumpus p43)))
        (invariant (wumpus p44) (not (wumpus p44)))
        (invariant (wumpus p45) (not (wumpus p45)))
        (invariant (wumpus p51) (not (wumpus p51)))
        (invariant (wumpus p52) (not (wumpus p52)))
        (invariant (wumpus p53) (not (wumpus p53)))
        (invariant (wumpus p54) (not (wumpus p54)))
        (invariant (wumpus p55) (not (wumpus p55)))

        ; Oneofs for stenches. These are the real observations.
        ; Positions of wumpuses are derived via inference rules
        ; (evidential reasoning).
        (invariant (stench p11) (not (stench p11)))
        (invariant (stench p12) (not (stench p12)))
        (invariant (stench p13) (not (stench p13)))
        (invariant (stench p14) (not (stench p14)))
        (invariant (stench p15) (not (stench p15)))
        (invariant (stench p21) (not (stench p21)))
        (invariant (stench p22) (not (stench p22)))
        (invariant (stench p23) (not (stench p23)))
        (invariant (stench p24) (not (stench p24)))
        (invariant (stench p25) (not (stench p25)))
        (invariant (stench p31) (not (stench p31)))
        (invariant (stench p32) (not (stench p32)))
        (invariant (stench p33) (not (stench p33)))
        (invariant (stench p34) (not (stench p34)))
        (invariant (stench p35) (not (stench p35)))
        (invariant (stench p41) (not (stench p41)))
        (invariant (stench p42) (not (stench p42)))
        (invariant (stench p43) (not (stench p43)))
        (invariant (stench p44) (not (stench p44)))
        (invariant (stench p45) (not (stench p45)))
        (invariant (stench p51) (not (stench p51)))
        (invariant (stench p52) (not (stench p52)))
        (invariant (stench p53) (not (stench p53)))
        (invariant (stench p54) (not (stench p54)))
        (invariant (stench p55) (not (stench p55)))

        (invariant (stench p11) (not (wumpus p12)))
        (invariant (stench p11) (not (wumpus p21)))
        (invariant (stench p12) (not (wumpus p11)))
        (invariant (stench p12) (not (wumpus p13)))
        (invariant (stench p12) (not (wumpus p22)))
        (invariant (stench p13) (not (wumpus p12)))
        (invariant (stench p13) (not (wumpus p14)))
        (invariant (stench p13) (not (wumpus p23)))
        (invariant (stench p14) (not (wumpus p13)))
        (invariant (stench p14) (not (wumpus p15)))
        (invariant (stench p14) (not (wumpus p24)))
        (invariant (stench p15) (not (wumpus p14)))
        (invariant (stench p15) (not (wumpus p25)))

        (invariant (stench p21) (not (wumpus p22)))
        (invariant (stench p21) (not (wumpus p11)))
        (invariant (stench p21) (not (wumpus p31)))
        (invariant (stench p22) (not (wumpus p21)))
        (invariant (stench p22) (not (wumpus p23)))
        (invariant (stench p22) (not (wumpus p12)))
        (invariant (stench p22) (not (wumpus p32)))
        (invariant (stench p23) (not (wumpus p22)))
        (invariant (stench p23) (not (wumpus p24)))
        (invariant (stench p23) (not (wumpus p13)))
        (invariant (stench p23) (not (wumpus p33)))
        (invariant (stench p24) (not (wumpus p23)))
        (invariant (stench p24) (not (wumpus p25)))
        (invariant (stench p24) (not (wumpus p14)))
        (invariant (stench p24) (not (wumpus p34)))
        (invariant (stench p25) (not (wumpus p24)))
        (invariant (stench p25) (not (wumpus p15)))
        (invariant (stench p25) (not (wumpus p35)))

        (invariant (stench p31) (not (wumpus p32)))
        (invariant (stench p31) (not (wumpus p21)))
        (invariant (stench p31) (not (wumpus p41)))
        (invariant (stench p32) (not (wumpus p31)))
        (invariant (stench p32) (not (wumpus p33)))
        (invariant (stench p32) (not (wumpus p22)))
        (invariant (stench p32) (not (wumpus p42)))
        (invariant (stench p33) (not (wumpus p32)))
        (invariant (stench p33) (not (wumpus p34)))
        (invariant (stench p33) (not (wumpus p23)))
        (invariant (stench p33) (not (wumpus p43)))
        (invariant (stench p34) (not (wumpus p33)))
        (invariant (stench p34) (not (wumpus p35)))
        (invariant (stench p34) (not (wumpus p24)))
        (invariant (stench p34) (not (wumpus p44)))
        (invariant (stench p35) (not (wumpus p34)))
        (invariant (stench p35) (not (wumpus p25)))
        (invariant (stench p35) (not (wumpus p45)))

        (invariant (stench p41) (not (wumpus p42)))
        (invariant (stench p41) (not (wumpus p31)))
        (invariant (stench p41) (not (wumpus p51)))
        (invariant (stench p42) (not (wumpus p41)))
        (invariant (stench p42) (not (wumpus p43)))
        (invariant (stench p42) (not (wumpus p32)))
        (invariant (stench p42) (not (wumpus p52)))
        (invariant (stench p43) (not (wumpus p42)))
        (invariant (stench p43) (not (wumpus p44)))
        (invariant (stench p43) (not (wumpus p33)))
        (invariant (stench p43) (not (wumpus p53)))
        (invariant (stench p44) (not (wumpus p43)))
        (invariant (stench p44) (not (wumpus p45)))
        (invariant (stench p44) (not (wumpus p34)))
        (invariant (stench p44) (not (wumpus p54)))
        (invariant (stench p45) (not (wumpus p44)))
        (invariant (stench p45) (not (wumpus p35)))
        (invariant (stench p45) (not (wumpus p55)))

        (invariant (stench p51) (not (wumpus p52)))
        (invariant (stench p51) (not (wumpus p41)))
        (invariant (stench p52) (not (wumpus p51)))
        (invariant (stench p52) (not (wumpus p53)))
        (invariant (stench p52) (not (wumpus p42)))
        (invariant (stench p53) (not (wumpus p52)))
        (invariant (stench p53) (not (wumpus p54)))
        (invariant (stench p53) (not (wumpus p43)))
        (invariant (stench p54) (not (wumpus p53)))
        (invariant (stench p54) (not (wumpus p55)))
        (invariant (stench p54) (not (wumpus p44)))
        (invariant (stench p55) (not (wumpus p54)))
        (invariant (stench p55) (not (wumpus p45)))
    )
    ; The important thing here is the stenches not the wumpuses. In fact, we
    ; can remove the wumpuses from the hidden state and the problem is still
    ; solvable. The reason is that the wumpuses are conditional independent
    ; of the rest of the fluents given the stenches (I think). The stenches
    ; form a "markov blanket".
    (:hidden (wumpus p31) (stench p21) (stench p41)              (stench p32)
             (wumpus p32) (stench p22) (stench p42) (stench p31) (stench p33))
    (:goal (at p51))
)
